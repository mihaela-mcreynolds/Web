<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="author" content="Mihaela McReynolds">
    <meta name="description" content="Lab 5. Add a check to make sure all questions
    have been answered and all required text fields filled in. Your JS should display
    a warning message to the user if input is incorrect and should *not* process
    the form until the error is corrected. The warning/error messages should be
    clear, accurate, and specific. Half-credit will be given for general/vague/
    "catch-all" messages. Use JavaScript to create a Summary/report page once
    all input has been entered correctly and the user clicks the "Submit" button.
    This page should look nice and be consistent with the rest of your site (use
    bootstrap, css, etc. -- so not just a blank page with some text). The summary/report
    should contain a "Thank you" message utilizing the name the user entered on
    the survey page. The summary page should be a new page (not an "overwriting"
    of the survey page). How you implement this is up to you. It could be a modal,
    a new tab or window, etc. -- as long as a new page is being created. The
    summary/report should summarize the user's survey responses in some way that
    makes sense (this will vary depending on your page -- they're all different).
    Please note that you might need to make some changes to how you set up the
    survey page in order to make it work with JS processing.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap">
    <link rel="stylesheet" href="index.css">
    <title>Survey</title>
  </head>
<body>
	<ul>
		<li><a href="lab4b.html" class="active">Home</a></li>
		<li><a href="#news">News</a></li>
		<li><a href="contact.html">Contact</a></li>
		<li><a href="#about">About</a></li>
	</ul>
	<div class="banner">
	<img src="acdc_banner.png" alt="Awesome Car Dealership Co text" style="width:100%;"></br>
    </div>
	<!-- <h1>Awesome  Car  Dealership Co</h1> -->
    <!-- 1. A checkbox question with 7 values -->
    <h2>Customer Satisfaction Survey</h2>
	<div class="logo">
	<img src="acdc_logo1.png" alt="image of a car with the text awesome car dealership co"></br>
    </div>
	<form id="form">
    <div class ="q">
      <p>
      <h3> Please enter your name:</h3></br>
        <input type = "text" id="userName" required></textarea>
      <p>
	    <h3>1. What kind of vehicle were you looking for?</h3></br>
			<label class="container"> 4-Door Sedan
			  <input type="checkbox" value= "4-Door Sedan">
			  <span class="checkmark"></span>
			</label>
			<label class="container"> Coupe
			  <input type="checkbox" value = "Coupe">
			  <span class="checkmark"></span>
			</label>
			<label class="container"> Sports Car
			  <input type="checkbox" value = "Sports Car">
			  <span class="checkmark"></span>
			</label>
			<label class="container"> Crossover
			  <input type="checkbox" value = "Crossover">
			  <span class="checkmark"></span>
			</label>
			<label class="container"> Van
			  <input type="checkbox" value = "Van">
			  <span class="checkmark"></span>
			</label>
			<label class="container"> Truck
			  <input type="checkbox" value = "Truck">
			  <span class="checkmark"></span>
			</label>
			<label class="container"> Hybrid
			  <input type="checkbox" value = "Hybrid">
			  <span class="checkmark"></span>
			</label>
	  </p>
    <!-- 2. A drop-down choice of location out of 4 values -->
      <p><h3>2. Which of our locations did you visit?</h3><br/>
        <select>
          <option value="West">West Awesome Car Dealership</option>
          <option value="East">East Awesome Car Dealership</option>
          <option value="North">North Awesome Car Dealership</option>
          <option value="South">South Awesome Car Dealership</option>
        </select><br/>
      </p>
	<!-- 3. A text box with 30 columns to get name or description of employee -->
      <p><h3>3. Which of our team members assisted you?</h3><br/>
        <textarea name="dealer_name" class="a">
        </textarea><br/>
      </p>
	  <!-- 6 radio style questions with 4 choices each. Question names are Q1-6.
    Assign value 3 for most positive result, 2 for second most positive, 1 for
    neutral, and 0 for negative. -->
      <p><h3>4. What did you think of our car lot and facilities?</h3><br/>
	    <label class="radioContainer"> Very clean and well-maintained
		  <input type="radio" name="Q4" value="3">
			<span class="checkRadio"></span>
		</label>
			    <label class="radioContainer"> Nice and inviting
		  <input type="radio" name="Q4" value="2">
			<span class="checkRadio"></span>
		</label>
			    <label class="radioContainer"> Nothing spectacular, but not bad
		  <input type="radio" name="Q4" value="1">
			<span class="checkRadio"></span>
		</label>
			    <label class="radioContainer"> Needs improvement
		  <input type="radio" name="Q4" value="0">
			<span class="checkRadio"></span>
		</label>
      </p>
      <p><h3>5. How well were you received into our building?</h3><br/>
	    <label class="radioContainer"> Fast, efficient and friendly reception
		  <input type="radio" name="Q5" value="3">
			<span class="checkRadio"></span>
		</label>
	    <label class="radioContainer"> Good service
		  <input type="radio" name="Q5" value="2">
			<span class="checkRadio"></span>
		</label>
			    <label class="radioContainer"> Average service
		  <input type="radio" name="Q5" value="1">
			<span class="checkRadio"></span>
		</label>
			    <label class="radioContainer"> Needs improvement
		  <input type="radio" name="Q5" value="0">
			<span class="checkRadio"></span>
		</label>
      </p>
      <p><h3>6. Was a dealer able to assist you in a timely manner?</h3><br/>
	    <label class="radioContainer"> Within 5 minutes
		  <input type="radio" name="Q6" value="3">
			<span class="checkRadio"></span>
		</label>
	    <label class="radioContainer"> Within 5-10 minutes
		  <input type="radio" name="Q6" value="2">
			<span class="checkRadio"></span>
		</label>
			    <label class="radioContainer"> Within 10-20 minutes
		  <input type="radio" name="Q6" value="1">
			<span class="checkRadio"></span>
		</label>
			    <label class="radioContainer"> I waited more than 20 minutes
		  <input type="radio" name="Q6" value="0">
			<span class="checkRadio"></span>
		</label>
      </p>
      <p><h3>7. Did the dealer understand your budget and needs?</h3></br>
	    <label class="radioContainer"> Perfectly
		  <input type="radio" name="Q7" value="3">
			<span class="checkRadio"></span>
		</label>
	    <label class="radioContainer"> Mostly
		  <input type="radio" name="Q7" value="2">
			<span class="checkRadio"></span>
		</label>
		<label class="radioContainer"> Only some aspects
		  <input type="radio" name="Q7" value="1">
			<span class="checkRadio"></span>
		</label>
	    <label class="radioContainer"> Not at all
		  <input type="radio" name="Q7" value="0">
			<span class="checkRadio"></span>
		</label>
      </p>
      <p><h3>8. Were you able to test drive the cars you wanted to?</h3></br>
	    <label class="radioContainer"> Yes, all of them
		  <input type="radio" name="Q8" value="3">
			<span class="checkRadio"></span>
		</label>
	    <label class="radioContainer"> Yes, but not all
		  <input type="radio" name="Q8" value="2">
			<span class="checkRadio"></span>
		</label>
		<label class="radioContainer"> I tested one of the cars I was interested in
		  <input type="radio" name="Q8" value="1">
			<span class="checkRadio"></span>
		</label>
		<label class="radioContainer"> I did not test any of the cars I was looking at
		  <input type="radio" name="Q8" value="0">
			<span class="checkRadio"></span>
		</label>
      </p>
      <p><h3>9. Did you find the perfect car for you?</h3></br>
	    <label class="radioContainer"> Yes
		  <input type="radio" name="Q9" value="3">
			<span class="checkRadio"></span>
		</label>
	    <label class="radioContainer"> I have a few to think about
		  <input type="radio" name="Q9" value="2">
			<span class="checkRadio"></span>
		</label>
		<label class="radioContainer"> No, but I will return
		  <input type="radio" name="Q9" value="1">
			<span class="checkRadio"></span>
		</label>
		<label class="radioContainer"> No, and I will not return
		  <input type="radio" name="Q9" value="0">
			<span class="checkRadio"></span>
		</label>
      </p>
      <!-- Use a range from 0 to 10 to assess satisfaction -->
      <p><h3>10. How satisfied are you with our dealership?</h3></br>
      	<span id="bad">Not at all satisfied</span>
		<span class="slidecontainer">
		  <input type="range" name="satisfaction" min="0" max="10" value = "5" class="slider" id ="myRange">
		</span>
		<span id="good">Very satisfied</span>
      </p>
      <!-- Additional feedback to be collected via textarea. Could include phone number, email address, or mailing address. -->
      <p><h3>11. Do you have any additional feedback for us?</br>
	  Please leave your preferred contact information if you would like our team to get back to you.</h3></br>
        <textarea name="feedback" class="b">
		</textarea>
	  </p>
      </br>
      <input type="button" onclick="myFunction()" value="Submit"
        style="color: white; background-color: #2e2b2b; border-color: #FF5900;">
      </br>
	  </div>
    </form>
    <script>
    // Nest functions to get all the different types of input
    // myFunction() will be the function called upon submitting
    function myFunction() {
      var x = document.getElementById("form");
      var choices = document.getElementsByTagName("input");
      var name = "";
      var totalValues = 0;
      var overall = 0;
      var firstImpressions = 0;
      var timely = 0;
      var reception = 0;
      var helpful = 0;
      var testDrive = 0;
      var foundCar = 0;
      var totalAverage = 0;
      var totalScores = 0;

      // Get the user's name from the form
      function getName() {
          name = x.elements[0].value;
          // Return the name entered in the text field
          if (name.length > 0) {
            return name;
          }
          // Use the name "Guest" for users who do not fill in their name
          else {
            return "Guest";
          }
      }
      // Get the value of the radio buttons in the survey
        // loop through the radio inputs
        // Q4: What did you think of our car lot and facilities?
      function getFirstImpressions() {
        for ( var i = 0; i < choices.length; i++) {
            // Check to see which radio is checked
          if (choices[i].checked) {
            if (choices[i].name == "Q4") {
              firstImpressions += Number(choices[i].value);
              return firstImpressions;
            }
          }
        }
      }
        // Q5: How well were you received into our building?
      function getReception() {
        for ( var i = 0; i < choices.length; i++) {
          if (choices[i].checked) {
            if (choices[i].name == "Q5") {
              reception += Number(choices[i].value);
              return reception;
            }
          }
        }
      }
        // Q6: Was a dealer able to assist you in a timely manner?
      function getTimely() {
        for ( var i = 0; i < choices.length; i++) {
            // Check to see which radio is checked
          if (choices[i].checked) {
            if (choices[i].name == "Q6") {
              timely += Number(choices[i].value);
              return timely;
            }
          }
        }
      }
        // Q7: Did the dealer understand your budget and needs?
      function getHelpful() {
        for (var i = 0; i < choices.length; i++) {
          if (choices[i].checked) {
            if (choices[i].name == "Q7") {
              helpful += Number(choices[i].value);
              return helpful;
            }
          }
        }
      }
        // Q8: Were you able to test drive the cars you wanted to?
      function getTestDrive() {
        for (var i = 0; i < choices.length; i++) {
          if (choices[i].checked) {
            if (choices[i].name == "Q8") {
              testDrive += Number(choices[i].value);
              return testDrive;
            }
          }
        }
      }
        // Q9: Did you find the perfect car for you?
      function getFoundCar() {
        for (var i = 0; i < choices.length; i++) {
          if (choices[i].checked) {
            if (choices[i].name == "Q9") {
              foundCar += Number(choices[i].value);
              return foundCar;
            }
          }
        }
      }
       // Q10
      function getOverall() {
        overall = document.getElementById("myRange").value;
        return overall;
      }
       // Get total Average
      function getTotalAverage(){
        // Only look at radio button choices
        var choices = document.getElementsByTagName("INPUT");
        for (var i = 0; i < choices.length; i++) {
          if (choices[i].checked) {
            if (choices[i].type == "radio"){
              totalScores += Number(choices[i].value);
              totalValues ++;
            }
          }
        }
        totalAverage = totalScores / totalValues;
        // Return the average with 2 decimal points
        return totalAverage.toFixed(2);
      }
      // Create a new innerHTML container to take the place of the form.
      // Container gets all the user input summarized and averaged from functions.
      var w = window.open('Results','wnd');

      w.document.body.innerHTML =
              '<div class="container mx-auto">' +
              '<h3 style="font-size: largeSize;"> Thank you for your input, <strong>'+
              getName() + "</strong>!</br></br></h3>" +
              "<h4> Your first impressions of our dealership: " +
              getFirstImpressions() + " out of 3.</br></br>" +
              " Your reception was: " + getReception() + " out of 3.</br></br>" +
              " Our timeliness was: " + getTimely() + " out of 3.</br></br>" +
              " Your dealer's helpfulness was: " + getHelpful() + " out of 3.</br></br>" +
              " Your testdrive experience was: " + getTestDrive() + " out of 3.</br></br>" +
              " You found the perfect car: " + getFoundCar() + " out of 3.</br></br>" +
              "Overall, you though this experience was: " + getOverall() +
              " out of 10.</br></br>" +
              " Based on your answers, our average score was " + getTotalAverage() +
              " out of 3.</h4></div>";
    }
    </script>
  </body>
</html>
